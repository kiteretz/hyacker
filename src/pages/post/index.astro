---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

import Layout from '../../layouts/Layout.astro';

// 型エイリアスで簡潔に
type Post = CollectionEntry<'posts'>;

const posts = await getCollection('posts');

// CollectionEntryを使用して型安全性を向上
const sortedPosts = posts.sort((a: Post, b: Post) => {
  return b.data.pubDate.getTime() - a.data.pubDate.getTime();
});
---

<Layout title="記事一覧" className="post-archive">
  <h2>Archives</h2>
  <ul>
    {
      sortedPosts.map((post: any) => (
        <li>
          <a href={`/post/${post.slug}`}>{post.data.title}</a>
        </li>
      ))
    }
  </ul>
</Layout>
